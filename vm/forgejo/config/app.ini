; Sovereign Forgejo Configuration
; TEAM_012: Self-hosted Git forge for Sovereign Vault

[server]
DOMAIN = sovereign-forge.tail5bea38.ts.net
ROOT_URL = https://sovereign-forge.tail5bea38.ts.net/
; TEAM_034: HTTPS on 443 (sysctl allows non-root binding)
PROTOCOL = https
HTTP_PORT = 443
HTTP_ADDR = 0.0.0.0
CERT_FILE = /data/forgejo/tls/cert.pem
KEY_FILE = /data/forgejo/tls/key.pem
SSH_DOMAIN = sovereign-forge.tail5bea38.ts.net
SSH_PORT = 22
DISABLE_SSH = false
START_SSH_SERVER = false
LFS_START_SERVER = true

[database]
; TEAM_030: PostgreSQL via bridge networking (192.168.100.x subnet)
; SQL VM: 192.168.100.2, Forge VM: 192.168.100.3, Gateway: 192.168.100.1
DB_TYPE = postgres
HOST = 192.168.100.2:5432
NAME = forgejo
USER = forgejo
PASSWD = forgejo
SSL_MODE = disable
; Increase retries for VM startup timing
DB_RETRIES = 30
DB_RETRY_BACKOFF = 2s

[repository]
ROOT = /data/forgejo/repositories
DEFAULT_BRANCH = main

[log]
; TEAM_030: Debug logging to diagnose InitWebInstalled hang
MODE = console
LEVEL = Debug
ROOT_PATH = /var/log/forgejo

[database]
; Enable SQL logging for debugging
LOG_SQL = true

[security]
; TEAM_034: Set to false to show onboarding wizard on first access
INSTALL_LOCK = false
SECRET_KEY = CHANGE_ME_IN_PRODUCTION
INTERNAL_TOKEN = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYmYiOjE3MDM4NjI0MDB9.sovereign-internal-token

[service]
DISABLE_REGISTRATION = false
REQUIRE_SIGNIN_VIEW = false

[mailer]
ENABLED = false

[picture]
DISABLE_GRAVATAR = true

[actions]
ENABLED = true
DEFAULT_ACTIONS_URL = https://code.forgejo.org
